<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <title>Profile</title>
    <style>label{display:block;margin:8px 0;}input,textarea{width:100%;max-width:500px}</style>
</head>
<body>
<h1>My Profile</h1>

<div th:if="${param.success}">
    <p style="color:green">Profile updated successfully.</p>
</div>

<div th:if="${user != null}">
    <form th:action="@{/profile/update}" method="post">
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
        <input type="hidden" name="id" th:value="${user.id}" />

        <label>Full name
            <input type="text" name="fullName" th:value="${user.fullName}" placeholder="Full name" />
        </label>

        <label>Bio
            <textarea name="bio" rows="4" th:text="${user.bio}"></textarea>
        </label>

        <!-- Note: User entity does not have a 'location' field; not included to avoid template errors -->

        <button type="submit">Update Profile</button>
        <a th:href="@{/}">Back</a>
    </form>
</div>
<div th:if="${user == null}">
    <p>User information is not available. If you were redirected here after login, please try refreshing the page or contact support.</p>
    <p><a th:href="@{/}">Back to Home</a></p>
</div>

</body>
</html>
